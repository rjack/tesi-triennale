\documentclass[12pt,a4paper,openright,twoside]{book}
\usepackage[italian]{babel}
\usepackage[utf8]{inputenc}
\usepackage{fancyhdr}
\usepackage{indentfirst}
\usepackage{graphicx}

\pagestyle{fancy}

\oddsidemargin=30pt
\evensidemargin=20pt

% Sillabazione
\hyphenation{}

% Intestazione e piè di pagina
\pagestyle{fancy}\addtolength{\headwidth}{20pt}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection \ #1}{}}
\rhead[\fancyplain{}{\bfseries\leftmark}]{\fancyplain{}{\bfseries\thepage}}
\cfoot{}

% Interlinea
\linespread{1.3}

\begin{document}

%
% Dedica
%
\begin{titlepage}
  % No numero di pagina
  \thispagestyle{empty}
  \topmargin=6.5cm
  \raggedleft
  \large
  \em A Chiara\\
  A mio fratello
\end{titlepage}

\pagenumbering{roman}

\chapter*{Introduzione}
\rhead[\fancyplain{}{\bfseries
INTRODUZIONE}]{\fancyplain{}{\bfseries\thepage}}
\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries
INTRODUZIONE}}
\addcontentsline{toc}{chapter}{Introduzione}
VoIP funziona su Internet: audio, video, testo e mail tutto in uno a

prezzo della connessione o poco più.

+ più potente della telefonia fissa
+ flessibile
+ individuale

- mobile della telefonia mobile.

Cellulari possono cambiare ripetitore al volo, i ripetitori sono distribuiti
su gran parte del territorio.

Connessione a Internet è legata all'indirizzo IP assegnato dal provider.
Un dispositivo Wi-Fi è confinato nell'area di copertura della rete a cui è
connesso. Cambiare rete significa cambiare indirizzo IP e quindi
interrompere la connessione. Una chiamata VoIP si interrope!

Scenario futuro in cui le città sono coperte da tante reti wireless con
diversi proprietari. Spostarsi nella città = cambiare spesso connessione
wireless = comunicazione interrotta di continuo.

Pausa tra disconnessione e riconnessione risolta con dispositivo
multi-homed. Serve middleware che nasconda le più interfacce wireless in una
sola (ULB)

Cambiamento di indirizzo IP risolto con Proxy Server.

Connessione wifi anello debole del percorso = serve meccanismo di
ritrasmissione veloce in modo da non avere ritardi audio/video (TED)

% Indice
\tableofcontents
\rhead[\fancyplain{}{\bfseries\leftmark}]{\fancyplain{}{\bfseries\thepage}}
\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries
INDICE}}

% Capitoli
\chapter{Scenario}
\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries\rightmark}}
\pagenumbering{arabic}

\begin{verbatim}
           +-----------------+                   +-------+
SOFTPHONE  |          iface0 +----AP0------------+       |
 |         |                 |                   |       |
 |         |          iface1 +----AP1------------+       |
 +---lo----+ LOAD            |        INTERNET   | PROXY +-...
           | BALANCER   ...  | ................. |       |
 +-MSG_ERR-+                 |                   |       |
 |         |          ifacen +----APn------------+       |
KERNEL     +-------------+---+                   +-------+
                         |
                    INTERFACE
                     MANAGER
\end{verbatim}

\chapter{Dettagli tecnici}
Come funziona il meccanismo del TED, dell'IM, etc. Riferimento
articolo dott. Ghini. (10/15 pp)

\chapter{Progettazione}
% Obiettivi a cui punto. Spiegazione soluzioni, algoritmi e scelte
% effettuate.
ULB sede dell'algoritmo di QoS.

Necessario confrontare diversi algoritmi, simulando il sistema perchè
impossibile sperimentare nella realtà in modo soddisfacente.

No puntare al realismo: per quello c'e' NS2.

Parametro riassuntivo della qualità di un collegamento: percentuale di
pacchetti persi. Questo parametro comprende tutte le cause che possono
portare alla perdita di pacchetti: interferenze, collisioni, distanza
dall'access point, etc.

\section{Obiettivi simulatore}
Deve poter gestire eventi, permettere di descrivere scenari in modo
semplice, permettere di sostituire diversi algoritmi nella simulazione
dell'ULB, dare in output una descrizione dettagliata e formattata di
tutto ciò che ha simulato. Questo output deve poter essere analizzato
con l'aiuto di utility come awk, perl, gnuplot.

\section{Obiettivi simulazione}
Confrontare i risultati:

\begin{itemize}
\item stesso scenario, algoritmi ULB differenti
\item stesso scenario, stesso algoritmo, parametri algoritmo differenti
\item scenari diversi per lo stesso algoritmo
\end{itemize}

Da tutto questo tirare fuori l'algoritmo migliore.

\section{Problemi}
Questa sezione illustra i problemi che devono essere affrontati dagli
algoritmi implementati nell'ULB. La sezione successiva mostrerà alcune
soluzioni e le confronterà tra loro.

\subsection{Ritrasmissione in tempi brevi}
ULB deve attendere le notifiche del TED e ritrasmettere i datagram che
sono stati segnalati come persi, ma senza superare i 150ms di ritardo.

\subsection{Valutazione interfacce}
ULB deve monitorare il comportamento delle varie interfacce dell'host
su cui viene eseguito e valutarne la qualità. L'interfaccia che
risulta essere la migliore viene utilizzata per l'invio dei dati. È
necessario definire sia quali siano i parametri secondo cui valutare
la qualità di un'interfaccia, sia le strategie di monitoraggio e
misurazione di questi parametri. La valutazione comprende sia
l'attività \emph{first hop} tra interfaccia e access point, sia quella
\emph{full path} tra interfaccia e Proxy Server.

\subsection{Rilevazione delle capacità del firmware}
I firmware delle schede di rete wireless sono in grado di notificare
sia l'avvenuta trasmissione di un datagram (ACK), sia la mancata
trasmissione (NAK). Putroppo non esiste uniformità di comportamento
tra i vari modelli sul mercato, ed è possibile che il firmware di una
scheda sia in grado di notificare solo ACK, oppure solo NAK, oppure
entrambi. Mancando un meccanismo nel kernel Linux per conoscere con
certezza le capacità di ogni firmware, ULB deve dedurle dal
comportamento osservato.

\subsubsection{Il problema del firmware silenzioso}
Il tipo di firmware si deduce dal tipo di notifiche ricevute dallo
stesso ed è quindi un meccanismo banale. Esistono però due casi in cui
il firmware può rimanere ``silenzioso'' e quindi impossibile da
rilevare:
\begin{enumerate}
\item quando una connessione pessima, che perde tutti i pacchetti,
  viene gestita da un firmware ACK che notifica solo successi, oppure
\item quando una connessione ottima, che non perde nessun pacchetto,
  viene gestita da un firmware NAK che notifica solo fallimenti.
\end{enumerate}
Non esiste un comportamento predefinito che soddisfi entrambe le
situazioni: la strategia del ritrasmettere ogni datagram che non
riceva notifiche entro un certo timeout funziona solo nella prima
situazione e risulta completamente inadeguato nella seconda.

\subsection{Conversazione unidirezionale}
Poichè l'host su cui risiede il softphone è dotato di più interfacce,
il Proxy Server si trova nella necessità di scegliere a quale tra
queste debba inviare i dati. Normalmente la scelta cade
sull'interfaccia che ha spedito gli ultimi dati ricevuti: se ULB l'ha
scelta come interfaccia migliore, il Proxy Server può fidarsi. Può
però accadere che il softphone non invii alcun dato perchè l'utente si
limita ad ascoltare; in questo caso il Proxy Server non ha cognizione
di quale sia l'interfaccia a cui inviare i dati.

\section{Soluzioni}
Tutti gli algoritmi sono stati progettati in modo da essere il più
possibile economici in termini di banda, tempi e energia.

Economia di banda significa limitare al minimo indispensabile
l'overhead nelle trasmissioni. In un contesto \emph{multi-homed} dove
ogni host possiede mediamente dalle due alle quattro interfacce,
ognuna di queste genera il proprio overhead che si va a sommare a
quello generato dalle altre.

L'economia di tempi è richiesta dalla caratterizzazione \emph{soft
  real-time} del problema, per cui un risultato ottenuto in ritardo
diventa inutilizzabile o fuorviante.

L'economia di energia dipende dalla natura dei client, che sono
tipicamente dispositivi mobili alimentati a batteria. Le interfacce
wireless sono periferiche avide di consumi e moltiplicandone il numero
si rischia di abbattere l'autonomia del client. Ancora una volta,
limitare l'overhead è l'unica via.

\chapter{simulatore}
Implementazione del simulatore.

\chapter{Valutazioni}
Metriche con cui valuto il mio sistema. Deduzioni su misurazioni
effettuate. Perchè ho misurato certe cose e non altre.

\chapter*{Conclusioni}
\rhead[\fancyplain{}{\bfseries
CONCLUSIONI}]{\fancyplain{}{\bfseries\thepage}}
\lhead[\fancyplain{}{\bfseries\thepage}]{\fancyplain{}{\bfseries
CONCLUSIONI}}
\addcontentsline{toc}{chapter}{Conclusioni}
Un temerario che scriva una patch per ns2.

\end {document}
